# 第2章 Spring IoC容器初探

## 2.1 Spring IoC容器及相关概念

### 2.1.1 什么是组件、框架和容器

组件：为了代码的重用而对代码进行的隔离和封装。

框架：在提供一系列组件的基础上，定义了更高层级的规范和开发方式。

容器：对不同层级的对象进行存放和管理。

### 2.1.2 JavaBean、POJO、EJB简介

JavaBean、POJO、和EJB都是对Java类定义的规范，目的是提高代码的规范性和重用性。

#### 1.JavaBean对象

JavaBean是JCP定义的一种Java标准，包括属性方法和规范三个方面的规范。

##### 规范的出发点和目的

1.定义成公共作用域的类是为了提供给其他类使用。

2.无参构造函数是让框架和容器可以使用<font color=green>反射机制</font><font color=red>进行实例化</font>。

3.Serializable接口是为了<font color=green> 可以序列化和反序列化</font>来<font color=red>进行对象的传输或保存到文件中</font>。

4.使用getter和setter方法读写属性，是为了不暴露属性。容器可以通过反射机制来进行属性值的读写。

#### 2.POJO（简单Java对象）

具体含义是指：没有继承任何类，也没有实现任何接口，不需要遵循框架的定义，更没有被其他框架侵入的Java对象。

POJO基本上不需要遵循任何规范。当一个POJO可序列化，有 <font color=green>无参构造函数</font>，使用getter和setter方法来访问属性时，他就是一个JavaBean。

#### 3.EJB（企业JavaBean）

EJB习惯称为企业Bean，是JavaEE服务器端的组件模型。

EJB定义的组件模型，开发人员不需要关注事务处理、安全性、资源缓存池和容错性。

EJB是用来定义分布式业务逻辑的组件Bean

EJB包含三种类型的Bean，分别是会话Bean、实体Bean和消息驱动Bean。

### 2.1.3 IoC与DI简介

IoC（控制反转）是一种编程思想，或者说是一种设计思想。

IoC模式将耦合从代码中移出去，放入配置文件中（比如XML文件），容器在启动时依据依赖配置生成依赖对象并注入。使用IoC容器后，代码从内部的耦合转到外部容器，解耦性更高，也更灵活。

IoC是一种设计思想，DI是这一思想的实现。控制反转乃至依赖注入的目的不是提升系统性能，而是提升组件的重用性和系统的可维护性。

依赖注入使用“反射”等底层技术，根据类名来生成相应的对象，注入依赖项和执行方法。但是与常规方法相比，反射会消耗更多的资源并导致性能的衰减，虽然JVM改良优化后，反射方式与一般方式的性能差距逐渐减小，但在提升代码的结构性和可维护性的同时，需要牺牲一定的系统性你能为代价。

### 2.1.4 Spring与EJB简介

Spring和EJB两者同样作为Bean托管容器。Spring管理的一般是POJO，EJB管理的是继承特定接口的Enterprise JavaBean。

使用EJB需要继承特定的类和接口，因为需要配置很多XML文件，而且需要打包部署到EJB容器，所以被看作重量级容器。

基于Spring框架开发，组件不需要继承特定的类和接口，通过配置容器的创建和管理对象并装载依赖对象，而且与Web开发无缝集成，被称为轻量级容器。

Spring和EJB并不是单纯的对立与竞争关系，从渊源上看，二者是相互借鉴、相互促进的。

